{"ast":null,"code":"import { RECEIVE_COMMENTS, ADD_COMMENT, DOWNVOTE_COMMENT, DELETE_COMMENT, UPDATE_COMMENT, UPVOTE_COMMENT } from \"../actions\";\nimport { api_voteComment, api_deleteComment } from '../API-calls';\nexport default ((state = [], action) => {\n  const {\n    comments,\n    comment,\n    type,\n    id\n  } = action;\n\n  switch (type) {\n    // UPDATE COMMENTS ===========================================\n    case RECEIVE_COMMENTS:\n      return [...comments];\n\n    case ADD_COMMENT:\n      return [...state, comment];\n    // VOTE COMMENT ===============================================\n\n    case DOWNVOTE_COMMENT:\n      if (api_voteComment(id, 'downVote')) {\n        return state.map(comment => {\n          if (comment.id === id) comment.voteScore--;\n          return comment;\n        });\n      } else {\n        return state;\n      }\n\n    case UPVOTE_COMMENT:\n      if (api_voteComment(id, 'upVote')) {\n        return state.map(comment => {\n          if (comment.id === id) comment.voteScore++;\n          return comment;\n        });\n      } else {\n        return state;\n      }\n\n    // EDIT COMMENT ================================================\n\n    case DELETE_COMMENT:\n      if (api_deleteComment(id)) {\n        return state.map(comment => {\n          if (comment.id === id) {\n            comment.deleted = true;\n          }\n\n          return comment;\n        });\n      } else {\n        return state;\n      }\n\n      return state.filter(comment => comment.id !== id);\n\n    case UPDATE_COMMENT:\n      return state;\n\n    default:\n      return state;\n  }\n});","map":{"version":3,"sources":["/home/aktoriukas/Documents/garrison-test2/frontend/src/reducers/comments.js"],"names":["RECEIVE_COMMENTS","ADD_COMMENT","DOWNVOTE_COMMENT","DELETE_COMMENT","UPDATE_COMMENT","UPVOTE_COMMENT","api_voteComment","api_deleteComment","state","action","comments","comment","type","id","map","voteScore","deleted","filter"],"mappings":"AAAA,SACIA,gBADJ,EAEIC,WAFJ,EAGIC,gBAHJ,EAIIC,cAJJ,EAKIC,cALJ,EAMIC,cANJ,QAM0B,YAN1B;AAQA,SAASC,eAAT,EAA0BC,iBAA1B,QAAmD,cAAnD;AAGA,gBAAe,CAACC,KAAK,GAAG,EAAT,EAAaC,MAAb,KAAwB;AAEnC,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,OAAZ;AAAqBC,IAAAA,IAArB;AAA2BC,IAAAA;AAA3B,MAAkCJ,MAAxC;;AAEA,UAAOG,IAAP;AAEI;AAEA,SAAKZ,gBAAL;AAEI,aAAO,CAAE,GAAGU,QAAL,CAAP;;AAEJ,SAAKT,WAAL;AAEI,aAAO,CAAC,GAAGO,KAAJ,EAAWG,OAAX,CAAP;AAGJ;;AAEA,SAAKT,gBAAL;AACI,UAAGI,eAAe,CAACO,EAAD,EAAK,UAAL,CAAlB,EAAmC;AAC/B,eAAOL,KAAK,CAACM,GAAN,CAAUH,OAAO,IAAI;AACxB,cAAIA,OAAO,CAACE,EAAR,KAAeA,EAAnB,EAAwBF,OAAO,CAACI,SAAR;AACxB,iBAAOJ,OAAP;AACH,SAHM,CAAP;AAIH,OALD,MAKM;AACF,eAAOH,KAAP;AACH;;AAGL,SAAKH,cAAL;AACI,UAAGC,eAAe,CAACO,EAAD,EAAK,QAAL,CAAlB,EAAiC;AAC7B,eAAOL,KAAK,CAACM,GAAN,CAAUH,OAAO,IAAI;AACxB,cAAIA,OAAO,CAACE,EAAR,KAAeA,EAAnB,EAAwBF,OAAO,CAACI,SAAR;AACxB,iBAAOJ,OAAP;AACH,SAHM,CAAP;AAIH,OALD,MAKK;AACD,eAAOH,KAAP;AACH;;AAGL;;AAEA,SAAKL,cAAL;AAEI,UAAGI,iBAAiB,CAACM,EAAD,CAApB,EAAyB;AACrB,eAAOL,KAAK,CAACM,GAAN,CAAUH,OAAO,IAAI;AACxB,cAAGA,OAAO,CAACE,EAAR,KAAeA,EAAlB,EAAqB;AACjBF,YAAAA,OAAO,CAACK,OAAR,GAAkB,IAAlB;AACH;;AACD,iBAAOL,OAAP;AACH,SALM,CAAP;AAMH,OAPD,MAOK;AACD,eAAOH,KAAP;AACH;;AAED,aAAOA,KAAK,CAACS,MAAN,CAAaN,OAAO,IAAIA,OAAO,CAACE,EAAR,KAAeA,EAAvC,CAAP;;AAEJ,SAAKT,cAAL;AAEI,aAAOI,KAAP;;AAEJ;AACI,aAAOA,KAAP;AA3DR;AA8DD,CAlEH","sourcesContent":["import  { \n    RECEIVE_COMMENTS,\n    ADD_COMMENT,\n    DOWNVOTE_COMMENT,\n    DELETE_COMMENT,\n    UPDATE_COMMENT,\n    UPVOTE_COMMENT } from \"../actions\";\n\nimport { api_voteComment, api_deleteComment } from '../API-calls'\n\n\nexport default (state = [], action) => {\n\n    const { comments, comment, type, id } = action;\n  \n    switch(type) {\n\n        // UPDATE COMMENTS ===========================================\n  \n        case RECEIVE_COMMENTS:\n  \n            return [ ...comments]\n  \n        case ADD_COMMENT:\n  \n            return [...state, comment]\n\n\n        // VOTE COMMENT ===============================================\n  \n        case DOWNVOTE_COMMENT:\n            if(api_voteComment(id, 'downVote')){\n                return state.map(comment => {\n                    if( comment.id === id ) comment.voteScore--\n                    return comment\n                })\n            }else {\n                return state\n            }\n\n  \n        case UPVOTE_COMMENT:\n            if(api_voteComment(id, 'upVote')){\n                return state.map(comment => {\n                    if( comment.id === id ) comment.voteScore++\n                    return comment\n                })\n            }else{\n                return state\n            }\n\n        \n        // EDIT COMMENT ================================================\n\n        case DELETE_COMMENT:\n\n            if(api_deleteComment(id)){\n                return state.map(comment => {\n                    if(comment.id === id){\n                        comment.deleted = true\n                    }\n                    return comment\n                })\n            }else{\n                return state\n            }\n\n            return state.filter(comment => comment.id !== id)\n\n        case UPDATE_COMMENT:\n\n            return state\n\n        default:\n            return state\n    }\n  \n  }\n  "]},"metadata":{},"sourceType":"module"}