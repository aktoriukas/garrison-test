{"ast":null,"code":"import { RECEIVE_POSTS, ADD_POST, UPVOTE_POST, DELETE_POST, UPDATE_POST, DOWNVOTE_POST } from \"../actions\";\nimport { api_votePost, api_deletePost } from '../API-calls';\nexport default ((state = [], action) => {\n  const {\n    posts,\n    type,\n    post,\n    id\n  } = action;\n\n  switch (type) {\n    // UPDATE POSTS ===========================================\n    case RECEIVE_POSTS:\n      return [...posts];\n\n    case ADD_POST:\n      return [...state, post];\n    // VOTE POST ===============================================\n\n    case DOWNVOTE_POST:\n      if (api_votePost(id, 'downVote')) {\n        return state.map(post => {\n          if (post.id === id) post.voteScore--;\n          return post;\n        });\n      } else {\n        return state;\n      }\n\n    case UPVOTE_POST:\n      if (api_votePost(id, 'upVote')) {\n        return state.map(post => {\n          if (post.id === id) post.voteScore++;\n          return post;\n        });\n      } else {\n        return state;\n      }\n\n    // EDIT POST ================================================\n\n    case DELETE_POST:\n      if (api_deletePost(id)) {\n        return state.map(post => {\n          if (post.id === id) {\n            post.deleted = true;\n          }\n\n          return post;\n        });\n      } else {\n        return state;\n      }\n\n    case UPDATE_POST:\n      return state;\n\n    default:\n      return state;\n  }\n});","map":{"version":3,"sources":["/home/aktoriukas/Documents/garrison-test2/frontend/src/reducers/posts.js"],"names":["RECEIVE_POSTS","ADD_POST","UPVOTE_POST","DELETE_POST","UPDATE_POST","DOWNVOTE_POST","api_votePost","api_deletePost","state","action","posts","type","post","id","map","voteScore","deleted"],"mappings":"AAAA,SACIA,aADJ,EAEIC,QAFJ,EAGIC,WAHJ,EAIIC,WAJJ,EAKIC,WALJ,EAMIC,aANJ,QAMyB,YANzB;AAQA,SAASC,YAAT,EAAuBC,cAAvB,QAA6C,cAA7C;AAEA,gBAAe,CAACC,KAAK,GAAG,EAAT,EAAaC,MAAb,KAAwB;AAEnC,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA,IAAT;AAAeC,IAAAA,IAAf;AAAqBC,IAAAA;AAArB,MAA4BJ,MAAlC;;AAEA,UAAQE,IAAR;AAEI;AAEA,SAAKX,aAAL;AACI,aAAO,CAAE,GAAGU,KAAL,CAAP;;AAEJ,SAAKT,QAAL;AACI,aAAO,CAAC,GAAGO,KAAJ,EAAWI,IAAX,CAAP;AAEJ;;AAEA,SAAKP,aAAL;AAEI,UAAGC,YAAY,CAACO,EAAD,EAAK,UAAL,CAAf,EAAgC;AAC5B,eAAOL,KAAK,CAACM,GAAN,CAAUF,IAAI,IAAI;AACrB,cAAIA,IAAI,CAACC,EAAL,KAAYA,EAAhB,EAAqBD,IAAI,CAACG,SAAL;AACrB,iBAAOH,IAAP;AACH,SAHM,CAAP;AAIH,OALD,MAKK;AACD,eAAOJ,KAAP;AACH;;AAGL,SAAKN,WAAL;AAEI,UAAGI,YAAY,CAACO,EAAD,EAAK,QAAL,CAAf,EAA8B;AAC1B,eAAOL,KAAK,CAACM,GAAN,CAAUF,IAAI,IAAI;AACrB,cAAIA,IAAI,CAACC,EAAL,KAAYA,EAAhB,EAAqBD,IAAI,CAACG,SAAL;AACrB,iBAAOH,IAAP;AACH,SAHM,CAAP;AAIH,OALD,MAKK;AACD,eAAOJ,KAAP;AACH;;AAGL;;AAEA,SAAKL,WAAL;AAEI,UAAGI,cAAc,CAACM,EAAD,CAAjB,EAAsB;AAClB,eAAOL,KAAK,CAACM,GAAN,CAAUF,IAAI,IAAI;AACrB,cAAGA,IAAI,CAACC,EAAL,KAAYA,EAAf,EAAkB;AACdD,YAAAA,IAAI,CAACI,OAAL,GAAe,IAAf;AACH;;AACD,iBAAOJ,IAAP;AACH,SALM,CAAP;AAMH,OAPD,MAOK;AACD,eAAOJ,KAAP;AACH;;AAGL,SAAKJ,WAAL;AAEI,aAAOI,KAAP;;AAEJ;AACI,aAAOA,KAAP;AAzDR;AA2DD,CA/DH","sourcesContent":["import { \n    RECEIVE_POSTS, \n    ADD_POST,\n    UPVOTE_POST,\n    DELETE_POST,\n    UPDATE_POST,\n    DOWNVOTE_POST } from \"../actions\";\n  \nimport { api_votePost, api_deletePost } from '../API-calls'\n\nexport default (state = [], action) => {\n\n    const { posts, type, post, id } = action;\n  \n    switch (type) {\n\n        // UPDATE POSTS ===========================================\n  \n        case RECEIVE_POSTS:\n            return [ ...posts ];\n  \n        case ADD_POST:\n            return [...state, post ]\n\n        // VOTE POST ===============================================\n\n        case DOWNVOTE_POST:\n\n            if(api_votePost(id, 'downVote')){\n                return state.map(post => {\n                    if( post.id === id ) post.voteScore--\n                    return post\n                })\n            }else{\n                return state\n            }\n\n    \n        case UPVOTE_POST:\n\n            if(api_votePost(id, 'upVote')){\n                return state.map(post => {\n                    if( post.id === id ) post.voteScore++\n                    return post\n                })\n            }else{\n                return state\n            }\n\n\n        // EDIT POST ================================================\n\n        case DELETE_POST:\n\n            if(api_deletePost(id)){\n                return state.map(post => {\n                    if(post.id === id){\n                        post.deleted = true\n                    }\n                    return post\n                })\n            }else{\n                return state\n            }\n\n    \n        case UPDATE_POST:\n\n            return state\n  \n        default:\n            return state;\n    }\n  };\n  "]},"metadata":{},"sourceType":"module"}